(()=>{var e,t={24:(e,t,o)=>{"use strict";t.M=void 0;var n=o(830),i=o(109),r=o(999),s=o(812),a=o(782),l=o(993),d=o(216),c=o(655),p=o(49),h=function(){function e(e,t){this.currentMouseHandler=null,this.currentTouchHandler=null;var o=this;console.log("Initialize plotboilerplate");var s=(0,n.gup)(),d=(0,i.detectDarkMode)(s);this.pb=new r.PlotBoilerplate(r.PlotBoilerplate.utils.safeMergeByKeys({canvas:document.getElementById("my-canvas"),fullSize:!0,fitToParent:!0,scaleX:1,scaleY:1,rasterGrid:!0,drawOrigin:!1,rasterAdjustFactor:2,redrawOnResize:!0,defaultCanvasWidth:1024,defaultCanvasHeight:768,canvasWidthFactor:1,canvasHeightFactor:1,cssScaleX:1,cssScaleY:1,cssUniformScale:!0,autoAdjustOffset:!0,offsetAdjustXPercent:50,offsetAdjustYPercent:50,backgroundColor:d?"#000000":"#ffffff",enableMouse:!0,enableKeys:!0},s));var p={width:120,height:20};this.editorHelpers=new a.EditorHelper(this,this.pb,p),this.editorRenderer=new l.EditorRenderer(this.pb,p,this.editorHelpers,d),this.pb.config.postDraw=function(e,t){o.dialogConfig&&(o.editorRenderer.renderBoxes(o.dialogConfig),o.editorRenderer.renderConnections(o.dialogConfig))},t?(console.log("Trying to recover config from localstorage."),this.tryLoadFromLocalStorage().then((function(e){o.handleDialogConfigLoaded(e)})).catch((function(){console.log("Loading from localstorage failed. Falling back loading from specified path."),o.tryLoadFromJSON(e)}))):o.tryLoadFromJSON(e),new c.FileDrop(this.pb.eventCatcher).onFileJSONDropped((function(e){console.log("[onFileJSONDropped] jsonObject",e),o.handleDialogConfigLoaded(a.EditorHelper.fromObject(e))}));document.getElementById("b-import-json").addEventListener("click",(function(){document.getElementById("input-upload-file").click()})),document.getElementById("input-upload-file").addEventListener("change",(function(e){var t=document.getElementById("input-upload-file");if(t.files&&0!==t.files.length){console.log("inputFile",t.files[0]);var n=new FileReader;n.onload=function(){var e=n.result;console.log(n.result),o.handleDialogConfigLoaded(a.EditorHelper.fromObject(JSON.parse(e)))},n.readAsText(t.files[0])}})),document.getElementById("b-run-test").addEventListener("click",(function(){o.testCurrentDialogueConfig()})),document.getElementById("b-new").addEventListener("click",o.requestCreateNewGraph()),document.getElementById("b-show-json").addEventListener("click",o.showJSON()),document.getElementById("b-goto-github").addEventListener("click",(function(){window.open("https://github.com/IkarosKappler/rpg-dialogue","_blank")}))}return e.prototype.tryStartAutosaveLoop=function(){if(!this.autosaveTimer){var e=this;this.autosaveTimer=globalThis.setInterval((function(){e.tryAutoSave()}),1e4)}},e.prototype.tryAutoSave=function(){this.editorHelpers.domHelper.isAutoSave()&&this.putToLocalStorage()},e.prototype.requestCreateNewGraph=function(){var e=this;return function(){e.editorHelpers.domHelper.modal.setTitle("Drop current graph?"),e.editorHelpers.domHelper.modal.setBody("Do you really want to create a new graph and lose unsaved changes?"),e.editorHelpers.domHelper.modal.setFooter(""),e.editorHelpers.domHelper.modal.setActions([p.Modal.ACTION_CANCEL,{label:"Yes",action:function(){e.editorHelpers.domHelper.modal.close(),e.performNewGraph()}}]),e.editorHelpers.domHelper.modal.open()}},e.prototype.performNewGraph=function(){this.handleDialogConfigLoaded({meta:{name:"dialogue_A",npcs:[{name:"NPC #0"}]},graph:{intro:{q:"Hello world!",o:[{a:"Hello, NPC!",next:null}],editor:{position:{x:0,y:0}}}}})},e.prototype.showJSON=function(){var e=this;return function(){var t=e.editorHelpers.domHelper.isExportWithoutPositions()?a.EditorHelper.removePositions(e.editorHelpers.dialogConfigWithPositions):e.editorHelpers.dialogConfigWithPositions,o=JSON.stringify(t,null,4),n=document.createElement("textarea");n.setAttribute("readonly","true"),n.innerHTML=o,n.classList.add("json-preview"),e.editorHelpers.domHelper.modal.setTitle("Current Graph as JSON"),e.editorHelpers.domHelper.modal.setBody(n),e.editorHelpers.domHelper.modal.setFooter(""),e.editorHelpers.domHelper.modal.setActions([p.Modal.ACTION_CLOSE]),e.editorHelpers.domHelper.modal.open()}},e.prototype.testCurrentDialogueConfig=function(){var e=this,t=document.createElement("div"),o=document.createElement("div"),n=document.createElement("ul");t.classList.add("rpg-output"),o.classList.add("rpg-output-question"),n.classList.add("rpg-output-options"),t.appendChild(o),t.appendChild(n);var i=new s.RPGDialogueLogic(this.dialogConfig,!1);i.addDialogueChangeListener((function(t,o,n,i){e.editorHelpers.setHighlightedNode(o)}));var r=this.editorHelpers.selectedNodeName;this.editorHelpers.setSelectedNode(null,null),i.beginConversation(o,n,r),this.editorHelpers.domHelper.modal.setTitle("Test"),this.editorHelpers.domHelper.modal.setBody(t),this.editorHelpers.domHelper.modal.setFooter(""),this.editorHelpers.domHelper.modal.setActions([p.Modal.ACTION_CLOSE]),this.editorHelpers.domHelper.modal.open()},e.prototype.handleDialogConfigLoaded=function(e){this.dialogConfig=this.editorHelpers.enrichPositions(e),this.editorHelpers.enrichMetaData(this.dialogConfig),console.log("Enriched meta data",this.dialogConfig),this.editorHelpers.setDialogConfig(this.dialogConfig),this.currentMouseHandler&&(this.currentMouseHandler.destroy(),this.currentMouseHandler=null),this.currentMouseHandler=this.editorHelpers.boxMovehandler(),this.currentTouchHandler&&(this.currentTouchHandler.destroy(),this.currentTouchHandler=null),this.currentTouchHandler=new d.TouchHandler(this.pb,this.dialogConfig,this.editorHelpers),this.pb.redraw(),this.tryStartAutosaveLoop()},e.prototype.putToLocalStorage=function(){var e=JSON.stringify(this.dialogConfig);globalThis.localStorage.setItem("__rpgeditor.dialogueconfig",e)},e.prototype.tryLoadFromJSON=function(e){var t=this;s.RPGDialogueLogic.loadConfigFromJSON(e).then((function(e){console.log("structure",e),t.handleDialogConfigLoaded(e)}))},e.prototype.tryLoadFromLocalStorage=function(){return new Promise((function(e,t){var o=globalThis.localStorage.getItem("__rpgeditor.dialogueconfig");o&&""!==o||t();try{var n=JSON.parse(o);if(!n)return void t();e(a.EditorHelper.fromObject(n))}catch(e){console.warn(e),t()}}))},e}();t.M=h},812:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RPGDialogueLogic=void 0;var i=n(o(218)),r=function(){function e(e,t){this.structure=e,this.listeners=[],this.resetToBeginning(),t&&this.validate()}return e.prototype.addDialogueChangeListener=function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e)return!1;return this.listeners.push(e),!0},e.prototype.removeDialogueChangeListener=function(e){for(var t=0;t<this.listeners.length;t++)if(this.listeners[t]===e)return this.listeners.splice(t,1),!0;return!1},e.prototype.fireStateChange=function(e,t,o){for(var n=0;n<this.listeners.length;n++)this.listeners[n](this.structure,e,t,o)},e.prototype.getCurrentNpcName=function(){var e,t,o,n=null!==(e=this.currentQuestionaire.npcIndex)&&void 0!==e?e:0;return(null===(o=null===(t=this.structure.meta)||void 0===t?void 0:t.npcs)||void 0===o?void 0:o.length)>0?this.structure.meta.npcs[n].name:null},e.prototype.loadCurrentQuestionaire=function(e,t){if(this.currentQuestionaire){var o=this.getCurrentNpcName();e(this.currentQuestionaire.q,o);for(var n=0;n<this.currentQuestionaire.o.length;n++)t(this.currentQuestionaire.o[n].a,n);return!0}return!1},e.prototype.getCurrentQuestionaire=function(){return this.currentQuestionaire},e.prototype.isEndReached=function(){return null===this.currentQuestionaire||void 0===this.currentQuestionaire},e.prototype.sendAnswer=function(e){if(e<0||e>=this.currentQuestionaire.o.length)return!1;var t=this.currentQuestionaireName,o=this.currentQuestionaire.o[e];if(!o)return!1;if(o.next){this.currentQuestionaireName=o.next;var n=this.structure.graph[this.currentQuestionaireName];n.o&&0!==n.o.length?this.currentQuestionaire=n:(this.currentQuestionaireName=null,this.currentQuestionaire=null)}else this.currentQuestionaireName=null,this.currentQuestionaire=null;return this.fireStateChange(this.currentQuestionaireName,t,e),console.log("Next questionaire",this.currentQuestionaire),!0},e.prototype.resetToBeginning=function(e){if(this.currentQuestionaireName=null!=e?e:"intro",this.currentQuestionaire=this.structure.graph[this.currentQuestionaireName],!this.currentQuestionaire)throw"Cannot initialize RPGDialogueLogic: structure does not have an 'intro' entry"},e.prototype.validate=function(){},e.prototype.getHTMLElement=function(e){return"string"==typeof e?document.getElementById(e):e},e.prototype.beginConversation=function(e,t,o){var n=this.getHTMLElement(e),i=this.getHTMLElement(t),r=function(e,t){n.innerHTML=t?'<span class="rpg-npcname">'.concat(t,":</span> ").concat(e):e},s=function(){i.innerHTML=""},a=function(e,t){var o=document.createElement("li"),n=document.createElement("a");n.innerHTML=e,n.setAttribute("href","#"),n.addEventListener("click",(function(){d(t)})),o.appendChild(n),i.appendChild(o)},l=this,d=function(e){l.sendAnswer(e),l.isEndReached()&&(r("---END OF CONVERSATION---",void 0),s()),s(),l.loadCurrentQuestionaire(r,a)};l.resetToBeginning(o),l.loadCurrentQuestionaire(r,a),l.fireStateChange(this.currentQuestionaireName,null,-1)},e.loadConfigFromJSON=function(e){return console.log("axios",i.default),new Promise((function(t,o){i.default.get(e).then((function(e){console.log(e),t(e.data)})).catch((function(e){console.log(e),o()})).finally((function(){}))}))},e.loadFromJSON=function(t){return new Promise((function(o,n){e.loadConfigFromJSON(t).then((function(t){o(new e(t,!0))}))}))},e}();t.RPGDialogueLogic=r},216:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchEnterLeaveHandler=t.TouchHandler=void 0;var n=o(999),i=function(){function e(e,t,o){this.wasTouchUsed=!1;var i,r=this,s=function(t){var o=e.canvas.getBoundingClientRect();return{x:t.x-o.left,y:t.y-o.top}},a=null,l=null,d=!1,c=null,p=null,h=function(){c=null,p=null,a=null},u={touchStart:function(h){console.log("Touchstart"),r.wasTouchUsed=!0,1==h.touches.length&&(c=new n.Vertex(s({x:h.touches[0].clientX,y:h.touches[0].clientY})),p=new n.Vertex(s({x:h.touches[0].clientX,y:h.touches[0].clientY})),(a=o.locateNodeBoxNameAtPos(e.transformMousePosition(c.x,c.y)))?l=t.graph[a]:i=o.locateOptionBoxNameAtPos(e.transformMousePosition(c.x,c.y)),d=!1)},touchMove:function(t){if(console.log("touchMove"),r.wasTouchUsed=!0,1==t.touches.length&&l){if(t.preventDefault(),t.stopPropagation(),!p||!c)return;var o=s({x:t.touches[0].clientX,y:t.touches[0].clientY}),i=e.transformMousePosition(o.x,o.y),a=new n.Vertex(e.transformMousePosition(c.x,c.y)).difference(i);l.editor.position.x+=a.x,l.editor.position.y+=a.y,c=new n.Vertex(s({x:t.touches[0].clientX,y:t.touches[0].clientY})),d=!0,e.redraw()}},touchEnd:function(e){if(console.log("touchEnd"),r.wasTouchUsed=!0,l){if(!p)return;d||(d=!1,l?o.selectedOption?o.handleOptionReconnect(a):(o.setSelectedOption(null,!1),o.setSelectedNode(a,l)):(o.setSelectedOption(i,!0),o.setSelectedNode(null,null)))}h()},touchCancel:function(e){console.log("touchCancel"),r.wasTouchUsed=!0,h()}};r.alloyFinger=globalThis.createAlloyFinger(e.eventCatcher?e.eventCatcher:e.canvas,u)}return e.prototype.destroy=function(){this.alloyFinger.destroy()},e}();t.TouchHandler=i;var r=function(){function e(){this.onTouchLeaveEvents=[],this.onTouchEnterEvents=[],this._init()}return e.prototype.onTouchEnter=function(e,t){var o=this;return this.onTouchEnterEvents.push([e,t]),function(){o.onTouchEnterEvents.slice().map((function(o,n){o[0]===e&&o[1]===t&&this.onTouchEnterEvents.splice(1,n)}))}},e.prototype.onTouchLeave=function(e,t){return this.onTouchLeaveEvents.push([e,t]),function(){this.onTouchLeaveEvents.slice().map((function(o,n){o[0]===e&&o[1]===t&&this.onTouchLeaveEvents.splice(1,n)}))}},e.prototype._init=function(){var e,t,o=this;document.addEventListener("touchmove",(function(n){var i=document.elementFromPoint(n.touches[0].clientX,n.touches[0].clientY);i&&(o.onTouchLeaveEvents.map((function(o){i!=t&&t&&t.matches(o[0])&&t!==e&&(o[1](t,n),e=t,t=null)})),o.onTouchEnterEvents.map((function(o){i.matches(o[0])&&i!==t&&(t=i,e=null,o[1](i,n))})))}))},e}();t.TouchEnterLeaveHandler=r},109:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectDarkMode=void 0;t.detectDarkMode=function(e){if(void 0!==e&&e.hasOwnProperty("darkmode")&&e.darkmode){var t=e.darkmode;if("0"===t||"false"===t.toLowerCase())return!1;if("1"===t||"true"===t.toLowerCase())return!0}var o=(new Date).getHours();return!(o>6&&o<18)}},619:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RPGDOMHelpers=void 0;var n=o(216),i=o(782),r=o(49),s=function(){function e(e){this.currentDraggedAnswerIndex=-1,this.currentDropAnswerIndex=-1,this.editorHelpers=e,this.touchEnterLeaveHandler=new n.TouchEnterLeaveHandler,this.editorElement=document.getElementById("attribute-editor"),this.optionsElement=document.getElementById("e-options-container"),this.keyElement=this.editorElement.querySelector("input#e-key"),this.npcElement=this.editorElement.querySelector("select#e-npc-index"),this.qElement=this.editorElement.querySelector("textarea#e-q"),this.qElement.addEventListener("change",this.handleQChanged(this)),this.npcElement.addEventListener("change",this.handleNPCIndexChanged(this)),this.keyElement.addEventListener("change",this.handleKeyChanged(this)),this.modal=new r.Modal,document.getElementById("b-export-json").addEventListener("click",this.exportJSON(this)),document.getElementById("b-add-answer-option").addEventListener("click",this.addAnswerOption(this)),document.getElementById("b-add-dialogue-node").addEventListener("click",this.addDialogueNode(this)),document.getElementById("b-delete-dialogue-node").addEventListener("click",this.requestRemoveDialogueNode(this))}return e.prototype.isExportWithoutPositions=function(){return document.getElementById("cb-export-without-positions").checked},e.prototype.isAutoSave=function(){return document.getElementById("cb-use-localstorage").checked},e.prototype.exportJSON=function(e){return function(){var t=e.isExportWithoutPositions()?i.EditorHelper.removePositions(e.editorHelpers.dialogConfigWithPositions):e.editorHelpers.dialogConfigWithPositions,o=JSON.stringify(t),n=new Blob([o],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="dialog-config.json",s.textContent="Download backup.json",s.click()}},e.prototype.addAnswerOption=function(e){return function(){e.currentGraphNode.o.push({a:"",next:null}),e.updateAnswerOptions(),e.editorHelpers.pb.redraw()}},e.prototype.addDialogueNode=function(e){return function(){e.editorHelpers.addNewDialogueNode()}},e.prototype.requestRemoveDialogueNode=function(e){return function(){e.modal.setTitle("Delete option?"),e.modal.setBody("Do you really want to delete the current dialoge node '".concat(e.currentNodeName,"'?")),e.modal.setFooter(""),e.modal.setActions([r.Modal.ACTION_CANCEL,{label:"Yes",action:function(){e.modal.close(),e.removeDialogueNode()}}]),e.modal.open()}},e.prototype.removeDialogueNode=function(){this.editorHelpers.removeNewDialogueNode(this.currentNodeName),this.toggleVisibility(!1)},e.prototype.toggleVisibility=function(e){e?this.editorElement.classList.remove("d-none"):this.editorElement.classList.add("d-none")},e.prototype.handleQChanged=function(e){return function(t){e.currentGraphNode.q=t.target.value,e.editorHelpers.pb.redraw()}},e.prototype.handleNPCIndexChanged=function(e){var t=this;return function(o){var n=parseInt(t.npcElement.value);Number.isNaN(n)&&(n=-1),e.currentGraphNode.npcIndex=n}},e.prototype.handleKeyChanged=function(e){var t=this;return function(o){var n=t.keyElement.value;n&&0!==(n=n.trim()).length&&(e.editorHelpers.renameGraphNode(e.currentNodeName,n)&&(e.currentNodeName=n))}},e.prototype.handleATextChanged=function(e,t){return function(o){t.a=o.target.value,e.editorHelpers.pb.redraw()}},e.prototype.handleASuccessorChanged=function(e,t){return function(o){t.next=o.target.value,e.editorHelpers.pb.redraw()}},e.prototype.updateAnswerOptions=function(){this.showAnswerOptions(this.currentNodeName,this.currentGraphNode)},e.prototype.getSelectedNpcIndex=function(){return void 0===this.currentGraphNode.npcIndex||Number.isNaN(this.currentGraphNode.npcIndex)?0:this.currentGraphNode.npcIndex},e.prototype.updateNpcSelector=function(){if(this.currentGraphNode){this.npcElement.innerHTML="";for(var e=this.getSelectedNpcIndex(),t=0;t<this.editorHelpers.dialogConfigWithPositions.meta.npcs.length;t++){var o=document.createElement("option");o.setAttribute("value","".concat(t)),o.innerHTML=0===t?"".concat(this.editorHelpers.dialogConfigWithPositions.meta.npcs[t].name," (default)"):this.editorHelpers.dialogConfigWithPositions.meta.npcs[t].name,t===e&&(o.setAttribute("selected","true"),o.selected=!0),this.npcElement.appendChild(o)}this.npcElement.value="".concat(e),this.npcElement.setAttribute("value","".concat(e))}},e.prototype.toggleDragEnterStyles=function(e){var t=this.currentDraggedAnswerIndex,o=parseInt(e.getAttribute("data-dropindex"));e.classList.contains("droppable")&&t!==o&&t+1!==o&&e.classList.add("dragover")},e.prototype.toggleDragLeaveStyles=function(e){console.log("toggleDragLeaveStyles"),e.classList.contains("droppable")&&e.classList.remove("dragover")},e.prototype.showAnswerOptions=function(e,t){var o=this;if(this.currentNodeName=e,this.currentGraphNode=t,this.keyElement.setAttribute("value",e||""),this.keyElement.value=e||"",this.updateNpcSelector(),this.optionsElement.innerHTML="",this.npcElement.value=!t||Number.isNaN(t.npcIndex)?"0":"".concat(t.npcIndex),this.qElement.setAttribute("value",t?t.q:""),this.qElement.value=t?t.q:"",t){var n=function(e){console.log("ondragover",e.target),e.preventDefault();var t=e.target;o.toggleDragEnterStyles(t)},i=function(e){console.log("ondragleave",e.target),e.preventDefault();var t=e.target;o.toggleDragLeaveStyles(t)};o.touchEnterLeaveHandler.onTouchEnter(".a-droparea",(function(e){console.log("onTouchEnter",e),e.classList.contains("a-droparea")&&(o.currentDropAnswerIndex=parseInt(e.getAttribute("data-dropIndex")),o.toggleDragEnterStyles(e))})),o.touchEnterLeaveHandler.onTouchLeave(".a-droparea",(function(e){console.log("onTouchLeave",e),o.currentDropAnswerIndex=-1,o.toggleDragLeaveStyles(e)}));var r=function(e){console.log("Drop",e),e.preventDefault();var t=e.target,n=o.currentDraggedAnswerIndex,i=parseInt(t.getAttribute("data-dropindex"));console.log("Move",n,"to",i),t.classList.contains("droppable")&&n!==i&&n+1!==i&&o.performDrop(n,i)},s=this.editorHelpers.editor.currentTouchHandler.wasTouchUsed,a=this.makeADropArea(0,r,n,i);this.optionsElement.appendChild(a);for(var l=0;l<t.o.length;l++){var d=t.o[l],c=document.createElement("div"),p=this.makeAnswerControlElement(l,s),h=document.createElement("div"),u=document.createElement("div"),g=document.createElement("textarea"),m=this.createNodeSelectElement(e,d.next);u.innerHTML="A#".concat(l),u.classList.add("e-label"),g.innerHTML=d.a,h.appendChild(u),h.appendChild(g),h.appendChild(m);c.classList.add("answer-wrapper-element"),s||p.dndHandleElement&&(p.dndHandleElement.setAttribute("draggable","true"),p.dndHandleElement.addEventListener("dragstart",(function(e){o.currentDraggedAnswerIndex=parseInt(e.target.getAttribute("data-answerindex")),e.dataTransfer.setData("answerindex","".concat(o.currentDraggedAnswerIndex))})),p.dndHandleElement.addEventListener("touchstart",(function(e){e.preventDefault();var t=e.target;if(o.currentDraggedAnswerIndex=parseInt(t.getAttribute("data-answerindex")),Number.isNaN(o.currentDraggedAnswerIndex)){if(t.classList.contains("a-dnd-element")&&(t=t.parentElement.parentElement),!t.classList.contains("answer-wrapper-element")||!t.getAttribute("draggable"))return void console.log("Cannot find draggable element.");o.currentDraggedAnswerIndex=parseInt(t.getAttribute("data-answerindex"))}})),p.dndHandleElement.addEventListener("touchend",(function(e){o.performDrop(o.currentDraggedAnswerIndex,o.currentDropAnswerIndex)})),p.dndHandleElement.setAttribute("data-answerindex","".concat(l))),c.appendChild(h),c.appendChild(p.container);var f=this.makeADropArea(l+1,r,n,i);this.optionsElement.appendChild(c),this.optionsElement.appendChild(f),g.addEventListener("change",this.handleATextChanged(this,d)),m.addEventListener("change",this.handleASuccessorChanged(this,d))}}},e.prototype.makeAnswerControlElement=function(e,t){var o=this,n=document.createElement("div");n.classList.add("answer-controls-element");var i=null;if(t){var r=document.createElement("div");r.classList.add("answer-up-down-element");var s=document.createElement("button");s.innerHTML="▴",0===e?s.setAttribute("disabled","true"):s.addEventListener("click",(function(){console.log("upBtn",e,e-1),o.performDrop(e,e-1)}));var a=document.createElement("button");a.innerHTML="▾",e+1===this.currentGraphNode.o.length?a.setAttribute("disabled","true"):a.addEventListener("click",(function(){console.log("downBtn",e,e+2),o.performDrop(e,e+2)})),r.appendChild(s),r.appendChild(a),n.appendChild(r)}else(i=document.createElement("div")).classList.add("a-dnd-element"),i.innerHTML="&vellip;",n.appendChild(i);var l=document.createElement("button");return l.classList.add("a-delete-button"),l.addEventListener("click",this.requestDeleteOption(e)),l.innerHTML="&#x1F5D1;",n.appendChild(l),{container:n,dndHandleElement:i}},e.prototype.performDrop=function(e,t){t>e&&t--;var o=this.currentGraphNode.o[e];this.currentGraphNode.o[e]=this.currentGraphNode.o[t],this.currentGraphNode.o[t]=o,this.updateAnswerOptions(),this.editorHelpers.pb.redraw()},e.prototype.requestDeleteOption=function(e){var t=this;return function(){t.modal.setTitle("Delete option?"),t.modal.setBody("Do you really want to delete option #".concat(e,"?")),t.modal.setFooter(""),t.modal.setActions([r.Modal.ACTION_CANCEL,{label:"Yes",action:function(){t.modal.close(),t.handleDeleteOption(e)}}]),t.modal.open()}},e.prototype.handleDeleteOption=function(e){this.currentGraphNode.o.splice(e,1),this.updateAnswerOptions(),this.editorHelpers.pb.redraw()},e.prototype.makeADropArea=function(e,t,o,n){var i=document.createElement("div");return i.setAttribute("data-dropindex","".concat(e)),i.classList.add("a-droparea","droppable"),i.addEventListener("drop",t),i.addEventListener("dragover",o),i.addEventListener("dragleave",n),i},e.prototype.createNodeSelectElement=function(e,t){var o=document.createElement("select");if(this.editorHelpers.dialogConfigWithPositions){var n=this.createNodeSelectOptionElement("",!1,null,!1);for(var i in o.appendChild(n),this.editorHelpers.dialogConfigWithPositions.graph){if(!this.editorHelpers.dialogConfigWithPositions.graph.hasOwnProperty(i))return;var r=this.editorHelpers.dialogConfigWithPositions.graph[i],s=this.createNodeSelectOptionElement(r.q,i===e,i,i===t);o.appendChild(s)}}else console.warn("Warning: cannout populate nodeSelectElement. No dialogConfig set.");return o},e.prototype.createNodeSelectOptionElement=function(e,t,o,n){var r=document.createElement("option");return r.setAttribute("value",o),r.innerHTML="".concat(null!=o?o:"",": ").concat(i.EditorHelper.ellipsify(e,20)),t&&r.setAttribute("disabled","true"),n&&r.setAttribute("selected","true"),r},e}();t.RPGDOMHelpers=s},782:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorHelper=void 0;var n=o(999),i=o(619),r=o(993),s=o(684),a=function(){function e(e,t,o){this.highlightedNodeName=null,this.highlightedNode=null,this.selectedNodeName=null,this.selectedNode=null,this.selectedOption=null,this.hightlightedOption=null,this.relativeMousePosition=null,this.editor=e,this.pb=t,this.boxSize=o,this.selectedNodeName=null,this.domHelper=new i.RPGDOMHelpers(this),this.metaHelpers=new s.DialogueMetaHelpers(this)}return e.prototype.setDialogConfig=function(e){this.dialogConfigWithPositions=e},e.prototype.setSelectedOption=function(e,t){console.log("Set selected option",e),this.selectedOption=e,t||this.pb.redraw()},e.prototype.setHighlightedOption=function(e){var t=!this.isEqualOptionIdentifyer(this.hightlightedOption,e);this.hightlightedOption=e,t&&this.pb.redraw()},e.prototype.setHighlightedNode=function(e,t){this.highlightedNodeName=e,this.highlightedNode=e?this.dialogConfigWithPositions.graph[e]:null,t||this.pb.redraw()},e.prototype.getRandomPosition=function(){var e=this.pb.viewport();return{x:e.min.x+this.boxSize.width+(e.width-2*this.boxSize.width)*Math.random(),y:e.min.y+this.boxSize.height+(e.height-2*this.boxSize.height)*Math.random()}},e.prototype.setSelectedNode=function(e,t){this.selectedNodeName=e,this.selectedNode=t,e&&t?(this.domHelper.toggleVisibility(!0),this.domHelper.showAnswerOptions(e,this.selectedNode)):(this.domHelper.toggleVisibility(!1),this.domHelper.showAnswerOptions(null,null)),this.pb.redraw()},e.prototype.enrichPositions=function(e){var t=e;for(var o in t.graph){var n=t.graph[o];n?n.hasOwnProperty("editor")?n.editor.hasOwnProperty("position")?(n.editor.position.hasOwnProperty("x")&&!isNaN(n.editor.position.x)||(n.editor.position.x=this.getRandomPosition().x),n.editor.position.hasOwnProperty("y")&&!isNaN(n.editor.position.y)||(n.editor.position.y=this.getRandomPosition().y)):n.editor.position=this.getRandomPosition():n.editor={position:this.getRandomPosition()}:console.warn("Warning: graph node ".concat(o," is null or undefined!"))}return t},e.prototype.enrichMetaData=function(e){var t=e;e.hasOwnProperty("meta")||(t.meta={name:"noname",npcs:[]}),t.meta.npcs||(t.meta.npcs=[]),0===t.meta.npcs.length&&t.meta.npcs.push({name:"NPC #0"})},e.prototype.isPosInGraphNodeBox=function(e,t){return t.editor.position.x<=e.x&&t.editor.position.y<=e.y&&t.editor.position.x+this.boxSize.width>e.x&&t.editor.position.y+this.boxSize.height>e.y},e.prototype.isPosInOptionNodeBox=function(e,t,o){return r.EditorRenderer.OPTION_OFFSET_X,t.editor.position.x+r.EditorRenderer.OPTION_OFFSET_X<=e.x&&t.editor.position.y+(o+1)*this.boxSize.height<=e.y&&t.editor.position.x+r.EditorRenderer.OPTION_OFFSET_X+this.boxSize.width>e.x&&t.editor.position.y+(o+1)*this.boxSize.height+this.boxSize.height>e.y},e.prototype.locateNodeBoxNameAtPos=function(e){for(var t in this.dialogConfigWithPositions.graph){var o=this.dialogConfigWithPositions.graph[t];if(this.isPosInGraphNodeBox(e,o))return t}return null},e.prototype.locateOptionBoxNameAtPos=function(e){for(var t in this.dialogConfigWithPositions.graph)for(var o=this.dialogConfigWithPositions.graph[t],n=0;n<o.o.length;n++)if(this.isPosInOptionNodeBox(e,o,n))return{nodeName:t,node:o,optionIndex:n};return null},e.prototype.isNodeHighlighted=function(e){return this.highlightedNodeName===e},e.prototype.isOptionHighlighted=function(e,t){return this.hightlightedOption&&this.hightlightedOption.nodeName===e&&this.hightlightedOption.optionIndex===t},e.prototype.isOptionSelected=function(e,t){return this.selectedOption&&this.selectedOption.nodeName===e&&this.selectedOption.optionIndex===t},e.prototype.addNewDialogueNode=function(){var e=this.selectedNode?{x:this.selectedNode.editor.position.x+2*this.boxSize.width,y:this.selectedNode.editor.position.y+this.boxSize.height}:this.getRandomPosition(),t=this.randomNodeKey(),o={q:"",o:[{a:"",next:null}],editor:{position:e}};this.dialogConfigWithPositions.graph[t]=o,this.selectedNodeName=t,this.selectedNode=o,this.domHelper.showAnswerOptions(t,o),this.pb.redraw()},e.prototype.removeNewDialogueNode=function(e){delete this.dialogConfigWithPositions.graph[e],this.selectedNodeName=null,this.selectedNode=null,this.domHelper.showAnswerOptions(null,null),this.pb.redraw()},e.prototype.boxMovehandler=function(){var e=this,t=this,o=null,i=null,r=null,s=null;return new n.MouseHandler(this.pb.eventCatcher).down((function(t){o=e.pb.transformMousePosition(t.params.mouseDownPos.x,t.params.mouseDownPos.y),i={x:t.params.mouseDownPos.x,y:t.params.mouseDownPos.y},(s=e.locateNodeBoxNameAtPos(o))&&(r=e.dialogConfigWithPositions.graph[s])})).up((function(e){o=null,r=null})).drag((function(t){o&&r&&(r.editor.position.x+=t.params.dragAmount.x/e.pb.draw.scale.x,r.editor.position.y+=t.params.dragAmount.y/e.pb.draw.scale.y)})).move((function(o){var n=e.pb.transformMousePosition(o.params.pos.x,o.params.pos.y);t.relativeMousePosition={x:n.x,y:n.y};var i=e.locateOptionBoxNameAtPos(n);if(t.setHighlightedOption(i),i)e.setHighlightedNode(null);else{var r=e.locateNodeBoxNameAtPos(n);e.setHighlightedNode(r)}})).click((function(o){if(console.log("lastMouseDownPos",i," evt.params.pos",o.params.pos),!i||i.x===o.params.pos.x&&i.y===o.params.pos.y){var n=e.pb.transformMousePosition(o.params.pos.x,o.params.pos.y);t.handleClick(n)}}))},e.prototype.handleClick=function(e){var t=this.locateOptionBoxNameAtPos(e);if(t)this.setSelectedOption(t);else{var o=this.locateNodeBoxNameAtPos(e);console.log("Click",o),o?this.selectedOption?(this.handleOptionReconnect(o),this.pb.redraw()):this.setSelectedNode(o,this.dialogConfigWithPositions.graph[o]):this.setSelectedNode(null,null),this.setSelectedOption(null,!1)}},e.prototype.handleOptionReconnect=function(e){this.selectedOption||console.warn("Warn: cannot reconnect option when no option is selected.");this.dialogConfigWithPositions.graph[e];var t=this.selectedOption.node;console.log("Reconnect"),t.o[this.selectedOption.optionIndex].next=e,this.domHelper.showAnswerOptions(this.selectedNodeName,this.selectedNode)},e.prototype.isEqualOptionIdentifyer=function(e,t){return!(!e&&t||e&&!t)&&(!(void 0===e&&void 0!==t||void 0!==e&&void 0===t)&&(e===t||void 0===e&&void 0===t||e.nodeName===t.nodeName&&e.optionIndex===t.optionIndex))},e.prototype.renameGraphNode=function(e,t){if(!this.dialogConfigWithPositions.graph.hasOwnProperty(e))return console.warn("Warning: cannot rename node, because old name does not exist.",e),!1;if("intro"===e)return console.warn("Warning: cannot rename node, because 'intro' must not be renamed'."),!1;if(this.dialogConfigWithPositions.graph.hasOwnProperty(t))return console.warn("Warning: cannot rename node, because new name already exists.",t),!1;if(t===e)return console.warn("Warning: cannot rename node, because old name and new name are the same.",e),!1;var o=this.dialogConfigWithPositions.graph[e];for(var n in this.dialogConfigWithPositions.graph[t]=o,delete this.dialogConfigWithPositions.graph[e],this.dialogConfigWithPositions.graph)if(this.dialogConfigWithPositions.graph.hasOwnProperty(n))for(var i=this.dialogConfigWithPositions.graph[n],r=0;r<i.o.length;r++)i.o[r].next===e&&(i.o[r].next=t);return e===this.selectedNodeName&&(this.selectedNodeName=t,this.selectedNode=this.dialogConfigWithPositions.graph[t]),this.pb.redraw(),!0},e.ellipsify=function(e,t){return!e||e.length<=t?e:"".concat(e.substring(0,t),"...")},e.fromObject=function(e){if("object"!=typeof e)throw"Cannot convert non-objects to dialogue config: type is ".concat(typeof e,".");if(!e.hasOwnProperty("graph"))throw"Cannot convert object to dialogue config: object missing member `graph`.";e.graph;for(var t in e){if(e.hasOwnProperty(t))if("object"!=typeof e[t])throw"Cannot converto bject to dialogue config: all graph members must be objects."}return e},e.removePositions=function(e){var t=JSON.parse(JSON.stringify(e));for(var o in t.graph){var n=t.graph[o];n.hasOwnProperty("editor")&&delete n.editor}return t},e.prototype.randomNodeKey=function(){for(var e=Object.keys(this.dialogConfigWithPositions.graph).length,t="New "+e;this.dialogConfigWithPositions.graph.hasOwnProperty(t);)t="New "+e,e++;return t},e}();t.EditorHelper=a},993:function(e,t,o){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorRenderer=void 0;var i=o(999),r=o(782),s=o(726),a=o(696),l=function(){function e(e,t,o,n){this.TEXT_MAX_LENGTH=20,this.pb=e,this.boxSize=t,this.editorHelpers=o,this.fontOptions={color:"black",fontFamily:"Arial",fontSize:12,fontStyle:"italic",fontWeight:"normal",lineHeight:26,textAlign:"left",rotation:0};var i=n?a.Color.parse("#000000"):a.Color.parse("#ffffff");this.fontOptions.color=(0,s.getContrastColor)(i).setAlpha(.8).cssRGBA()}return e.prototype.renderBoxes=function(e){for(var t=Object.keys(e.graph),o=t.length,n=0;n<o;n++){var i=t[n],r=e.graph[i];this.renderGraphNode(i,r),this.renderOptions(i,r)}this.renderSuggestedConnection()},e.prototype.renderSuggestedConnection=function(){if(this.editorHelpers.selectedOption){var e=this.editorHelpers.isPosInOptionNodeBox(this.editorHelpers.relativeMousePosition,this.editorHelpers.selectedOption.node,this.editorHelpers.selectedOption.optionIndex),t=this.editorHelpers.highlightedNode?this.editorHelpers.highlightedNode.editor.position:e?null:this.editorHelpers.relativeMousePosition;t&&this.drawBezierConnection(this.editorHelpers.selectedOption.node,this.editorHelpers.selectedOption.optionIndex,t,!0,!0)}},e.prototype.renderGraphNode=function(e,t){var o=this.editorHelpers.selectedNodeName===e,i=this.editorHelpers.isNodeHighlighted(e);this.pb.fill.text(e,t.editor.position.x,t.editor.position.y-this.boxSize.height,n(n({},this.fontOptions),{color:"grey"})),this.pb.draw.rect(t.editor.position,this.boxSize.width,this.boxSize.height,o?"rgba(255,128,0,1.0)":"rgba(0,255,0,1.0)",1),t.o&&0!==t.o.length&&"intro"!==e&&!i||this.pb.fill.rect({x:t.editor.position.x,y:t.editor.position.y},this.boxSize.width,this.boxSize.height,i?"rgba(255,128,0,0.5)":o?"rgba(255,128,0,0.3)":"rgba(0,255,0,0.3)",1),this.pb.fill.text(t.q?o?t.q:r.EditorHelper.ellipsify(t.q,this.TEXT_MAX_LENGTH):"-no text-",t.editor.position.x,t.editor.position.y,this.fontOptions)},e.prototype.renderOptions=function(t,o){for(var s=this.editorHelpers.selectedNodeName===t,a=o.editor.position.y+this.boxSize.height,l=o.editor.position.x+e.OPTION_OFFSET_X,d=0;d<o.o.length;d++){var c=o.o[d],p=!(null!==this.editorHelpers.selectedOption&&!this.editorHelpers.isOptionSelected(t,d))&&this.editorHelpers.isOptionHighlighted(t,d),h=this.editorHelpers.isOptionSelected(t,d);if((p||h)&&this.pb.fill.rect({x:l,y:a},this.boxSize.width,this.boxSize.height,"rgba(255,192,0,0.5)",1),this.pb.draw.rect({x:l,y:a},this.boxSize.width,this.boxSize.height,"grey",1),this.pb.fill.text(c.a?s?c.a:r.EditorHelper.ellipsify(c.a,this.TEXT_MAX_LENGTH):"-no text-",l,a,n(n({},this.fontOptions),{color:p||h?"black":"grey"})),p||h){var u=new i.Vertex(o.editor.position).addXY(this.boxSize.width+16,this.boxSize.height/2+(d+1)*(this.boxSize.height+2)-2);this.pb.fill.circle(u,5,"orange")}a+=this.boxSize.height+2}},e.prototype.renderConnections=function(e){for(var t=Object.keys(e.graph),o=t.length,n=0;n<o;n++)for(var i=t[n],r=e.graph[i],s=0;s<r.o.length;s++){var a=r.o[s].next;if(a){var l=e.graph[a];if(l){var d=this.editorHelpers.isOptionHighlighted(i,s),c=null!==this.editorHelpers.selectedOption&&!this.editorHelpers.isOptionSelected(i,s),p=this.editorHelpers.isOptionSelected(i,s);this.drawBezierConnection(r,s,l.editor.position,d&&!c,p)}}}},e.prototype.drawBezierConnection=function(e,t,o,n,r){var s=new i.Vertex(e.editor.position).addXY(this.boxSize.width+16,this.boxSize.height/2+(t+1)*(this.boxSize.height+2)-2),a=new i.Vertex(o),l=s.clone().addXY(50,0),d=a.clone().subXY(50,50),c=this.pb.canvas instanceof HTMLCanvasElement;c&&(n?this.pb.draw.ctx.setLineDash([10,6]):this.pb.draw.ctx.setLineDash([0])),this.cubicBezierArrow(s,a,l,d,n||r?"rgba(0,192,255,0.5)":"rgba(255,192,0,0.5)",2),c&&this.pb.draw.ctx.setLineDash([0])},e.prototype.cubicBezierArrow=function(e,t,o,n,r,s){var a=this,l=i.Vertex.utils.buildArrowHead(n,t,8,1,1).map((function(e){return e.scale(1/a.pb.draw.scale.x,t)}));this.pb.draw.cubicBezier(e,t,o,n,r,s),this.pb.fill.polyline(l,!1,r,s)},e.OPTION_OFFSET_X=16,e}();t.EditorRenderer=l},706:(e,t,o)=>{globalThis.gup=o(830).gup,globalThis.detectDarkMode=o(109).detectDarkMode,globalThis.RPGDialogueLogic=o(812).RPGDialogueLogic,globalThis.RPGDOMHelpers=o(619).RPGDOMHelpers,globalThis.DialogueMetaHelpers=o(684).DialogueMetaHelpers,globalThis.Modal=o(49).Modal,globalThis.EditorHelper=o(782).EditorHelper,globalThis.TouchHandler=o(216).TouchHandler,globalThis.Editor=o(24).M,console.log("Editor",Editor)},830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gup=void 0;t.gup=function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,o,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];return e[o]=n,n}));return e}},684:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogueMetaHelpers=void 0;var n=o(49),i=function(){function e(e){this.editorHelpers=e,document.getElementById("b-configure-meta").addEventListener("click",this.handleModalOpen())}return e.prototype.handleModalOpen=function(){var t=this,o=this;return function(){o.metaCopy=e.cloneMeta(t.editorHelpers.dialogConfigWithPositions.meta),o.editorHelpers.domHelper.modal.setTitle("Dialogue Config Meta Data"),o.editorHelpers.domHelper.modal.setBody(o.buildMetaBody()),o.editorHelpers.domHelper.modal.setFooter(""),o.editorHelpers.domHelper.modal.setActions([{label:"Save",action:o.handleSave()},n.Modal.ACTION_CANCEL]),o.editorHelpers.domHelper.modal.open()}},e.prototype.updateModalBody=function(){var e=this.buildMetaBody();this.editorHelpers.domHelper.modal.setBody(e)},e.prototype.buildMetaBody=function(){var e=document.createElement("div");this.inputName=document.createElement("input"),this.inputName.value=this.metaCopy.name,this.inputName.addEventListener("change",this.handleUpdateMetaName());var t=document.createElement("div");t.innerHTML="Dialogue name";var o=document.createElement("div");o.classList.add("e-meta-npccontainer"),this.inputsNpcNames=[];for(var n=0;n<this.metaCopy.npcs.length;n++){var i=document.createElement("div"),r=document.createElement("div");r.innerHTML="NPC #".concat(n);var s=document.createElement("input");s.value=this.metaCopy.npcs[n].name,s.addEventListener("change",this.handleNpcNameChange(n));var a=document.createElement("button");a.innerHTML="&#x1F5D1;",a.addEventListener("click",this.handleDeleteNpc(n)),i.appendChild(r),i.appendChild(s),i.appendChild(a),o.appendChild(i),this.inputsNpcNames.push(s)}var l=document.createElement("button");return l.innerHTML="Add NPC",l.addEventListener("click",this.handleAddNpc()),e.appendChild(t),e.appendChild(this.inputName),e.appendChild(o),e.appendChild(l),e},e.prototype.handleUpdateMetaName=function(){var e=this;return function(t){e.metaCopy.name=t.target.value}},e.prototype.handleNpcNameChange=function(e){var t=this;return function(o){t.metaCopy.npcs[e].name=o.target.value}},e.prototype.handleDeleteNpc=function(e){var t=this;return function(){t.metaCopy.npcs.splice(e,1),t.updateModalBody()}},e.prototype.handleAddNpc=function(){var e=this;return function(){e.metaCopy.npcs.push({name:"New NPC"}),e.updateModalBody()}},e.prototype.handleSave=function(){var e=this;return function(){e.editorHelpers.dialogConfigWithPositions.meta=e.metaCopy,e.editorHelpers.domHelper.modal.close(),e.editorHelpers.domHelper.updateNpcSelector()}},e.cloneMeta=function(e){var t={};t.name=e.name,t.npcs=[];for(var o=0;o<e.npcs.length;o++)t.npcs.push({name:e.npcs[o].name});return t},e}();t.DialogueMetaHelpers=i},49:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var o=function(){function e(){this.modalElements=this.buildDOMNode("myModal-"+e.MODAL_COUNTER++)}return e.prototype.setTitle=function(e){this.modalElements.modal.header.content.innerHTML=e},e.prototype.setBody=function(t){e.isDOMNode(t)?(e.removeChildNodes(this.modalElements.modal.body.content),this.modalElements.modal.body.content.append(t)):this.modalElements.modal.body.content.innerHTML=t},e.prototype.setFooter=function(e){"string"==typeof e?this.modalElements.modal.footer.content.innerHTML=0==e.length?"&nbsp;":e:console.log("Footer elements?")},e.prototype.setActions=function(t){var o=this;if(e.removeChildNodes(this.modalElements.modal.footer.actions),Array.isArray(t))for(var n in t){var i=t[n],r=null,s=document.createElement("button");s.innerHTML=i.label,"function"==typeof i.action?s.addEventListener("click",i.action):("string"==typeof i&&null!=(r=i)||"string"==typeof i.action&&null!=(r=i.action))&&("cancel"!==r&&"ok"!==r&&"close"!==r||s.addEventListener("click",(function(){o.close()}))),this.modalElements.modal.footer.actions.appendChild(s)}},e.prototype.close=function(){this.modalElements.modal.parent.classList.remove("modal-opened"),this.modalElements.modal.parent.classList.add("modal-closed")},e.prototype.open=function(){this.modalElements.modal.parent.classList.remove("modal-closed"),this.modalElements.modal.parent.classList.add("modal-opened")},e.prototype.buildDOMNode=function(e){var t=this,o=document.createElement("div");o.setAttribute("id",e),o.classList.add("modal"),o.classList.add("modal-closed");var n=document.createElement("div");n.classList.add("modal-content");var i=document.createElement("div");i.classList.add("modal-header");var r=document.createElement("span");r.classList.add("modal-close"),r.innerHTML="&times;";var s=document.createElement("h2");s.innerHTML="Modal Header";var a=document.createElement("div");a.classList.add("modal-body");var l=document.createElement("p");l.innerHTML="Some text in the Modal Body";var d=document.createElement("div");d.classList.add("modal-footer");var c=document.createElement("h3"),p=document.createElement("div");return c.innerHTML="Modal Footer",p.classList.add("modal-actions"),d.appendChild(c),d.appendChild(p),i.appendChild(r),i.appendChild(s),n.appendChild(i),a.appendChild(l),n.appendChild(a),n.appendChild(d),o.appendChild(n),r.onclick=function(){t.close()},document.getElementsByTagName("body")[0].appendChild(o),{modal:{id:e,parent:o,header:{closeBtn:r,content:s},body:{content:l},footer:{content:c,actions:p}}}},e.isDOMNode=function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},e.ACTION_CLOSE={label:"Close",action:"close"},e.ACTION_CANCEL={label:"Cancel",action:"close"},e.ACTION_OK={label:"OK",action:"close"},e.MODAL_COUNTER=0,e.removeChildNodes=function(e){for(;e.firstChild;)e.removeChild(e.lastChild)},e}();t.Modal=o}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,o,i,r)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,i,r]=e[c],a=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(a=!1,r<s&&(s=r));if(a){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,i,r]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,r,[s,a,l]=o,d=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var c=l(n)}for(t&&t(o);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self.webpackChunkrpg_dialogue=self.webpackChunkrpg_dialogue||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[736],(()=>n(706)));i=n.O(i)})();
//# sourceMappingURL=rpg-dialogue-main.min.js.map